<div id="navigator">
  <%= form_tag bike_stations_index_path, :id => "find_stations" do %>
    <%= hidden_field_tag 'origin', nil, :id => "origin" %>
    <%= hidden_field_tag 'route', nil, :id => "route" %>
    <div class="row">
      <div class="input-prepend input-append span6">
        <input class="span3" id="new_origin" type="text"></input>
        <span class="add-on">San Francisco, CA</span>
        <%= submit_tag 'Set Origin', :id => "set_origin", :class => 'btn' , :type => "button" %>
      </div>

      <% if @bike_stations %>
        <div class="btn-group span6">
          <a class="btn dropdown-toggle" data-toggle="dropdown">
            <span id="route_choice"><%= "#{@destination.address}" %></span>
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <% @bike_stations.each do |station| %>
              <li><a class="new_route" id="<%= station.id %>">
                <% unless station.name == "Unknown" %>
                  <%= "#{station.distance.to_f.round(2)} miles - #{station.name} (#{station.spaces} Spaces)" %>
                <% else %>
                  <%= "#{station.distance.to_f.round(2)} miles - #{station.address} (#{station.spaces} Spaces)" %>
                <% end %>
              </a></li>
            <% end %>
          </ul>
          <%= submit_tag 'Route', :class => "btn" %>
        </div>
      <% end %>
    </div>

    <% if @destination %>
      <div class="row">
        <div class="span5">
          <div class="input-prepend input-append">
            <span class="add-on badge badge-success">A</span>
            <span class="span5 uneditable-input" type="text"><%= "#{@origin.address}" %></span>
          </div>
          <div class="input-prepend input-append">
            <span class="add-on badge badge-important">B</span>
            <span class="span5 uneditable-input" type="text"><%= "#{@destination.address}" %></span>
          </div>
        </div>
      </div>
    <% end %>

  <% end %>
</div>

<div id="map-canvas"></div>

<%= render 'map_js' %>


